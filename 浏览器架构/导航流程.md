[TOC]
# 导航流程

## 从输入url到页面展示

### 处理用户输入

- 搜索内容

	- 使用浏览器默认的搜索引擎，合成新的带搜索关键字的url

- 请求url

	- 合成完整的url

- 标签页上的图标进入加载状态，但此时仍然是之前的页面

### URL请求过程

- 浏览器进程通过IPC把URL发送到网络进程
- 具体流程

	- 1. 查找缓存
	- 2. DNS解析
	- 3. 建立TCP连接
	- 4. 发送http请求
	- 5. 服务器处理请求，返回响应
	- 6. 网络进程处理响应

		- 重定向
		- 响应数据类型处理

			- content-type

				- 页面text/html
				- 下载application/octet-stream

					- 导航流程结束

### 准备渲染进程

- 默认情况下，chrome会为每个页面分配一个渲染进程
- 在同一站点下的页面，会复用同一个渲染进程

	- 同一根域名和协议算作一个站点

- 渲染进程准备好之后，还不能立即进入文档解析状态，因为此时的文档数据还在网络进程中，并没有提交到渲染进程

### 提交文档

- 文档指的是url请求的响应体部分
- 提交文档的消息是由浏览器进程发出的，渲染进程收到提交文档的消息后，会和网络进程建立传输消息的管道
- 等到文档传输完成后，渲染进程会向浏览器返回”确认提交“的消息
- 浏览器进程收到确认提交的消息后，会更新浏览器界面状态，包括安全状态、地址栏url，前进后退的历史状态，并更新web页面

### 渲染阶段

- 一旦页面生成完成，渲染进程会发送一个消息给浏览器进程，浏览器收到消息后，会停止标签图标上的加载动画

*XMind: ZEN - Trial Version*